<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"/>
        <meta name="msapplication-tap-highlight" content="no" />
        <title>Eluvy</title>
        <script type="text/javascript" src="js/header.js"></script>
        <script type="text/javascript" src="js/mofluid_slider.js"></script>
        <script type="text/javascript">
           // app.initialize();
        </script>
        <script type="text/javascript" langauge="javascript">
            
            
            var loading="true";
            var _top = $(window).scrollTop();
            var _direction;
            var page = 1;
            var pagesize_new = 20;
            var sorttype = "";
            var sortorder = "";
            var categoryfound = 1;
            var parentstr, total_available_listed_product;
            var total_listed_product = 0;
            var app_curr_code = config.data[0].app_currency;
            var app_curr_symbol = config.data[0].app_curr_symbol;
           
           var database = config.data[0].storage_key;
           var cache_expire_time=localStorage['c_time'];
           var cache_expire_status=localStorage['c_status'];
           var cache_time = parseInt(parseInt(cache_expire_time) * 60 *1000);
           if(cache_expire_status==0 || cache_expire_status==null)
           {
               var cache_time = parseInt(parseInt(config.data[0].cache_time) * 60 *1000);
           }
        
        function onDeviceReady() {
            document.addEventListener("deviceready", onLoad, false);
			
			setfourBox();
        }
        
            function onLoad(){
			
				
                
                var viewport = {
                    width  : $(window).width(),
                    height : $(window).height()
                };
                //alert(viewport.width);alert(viewport.height);
                if(viewport.width > 420){
                    pagesize_new = 10;
                }
           //  $("#loader_div").hide();
                loadLogoBanner();
                try {
                    var MYSTORE = JSON.parse(localStorage[config.data[0].storage_key+"_STORE"]);
                    document.title = MYSTORE["store"]["name"];
                    $("#storelabel").html(MYSTORE["store"]["name"]);
                }
                catch(err) {
                    console.log(err.message);
                }
                
                parentstr=getParameterByName('parent');
                var show_pro =getParameterByName('All');
                
                
                if(show_pro == 1){
                    categoryfound = 0;
                  //  localStorage.setItem(config.data[0].storage_key+'_cat_flag',1);
                   // printProducts(page);
                }
                else{
                    if(localStorage.getItem('foo') == 1){
                        categoryfound = 0;
                        
                        // $("#Showpro").hide();
                      //  $("#banner_slider").hide();
                      /*
                      These variables are using for manage back page funcnality. Based on these variables
                        _pro_flag
                        _cat_flag
                        _pro_detail_flag
                       
                       */
                      
                      // localStorage['catIds'] this localstorage for n lavae category for back button smooth functionality , useing this in
                      if(JSON.parse(localStorage['catIds']).length)
                      {
                          localStorage.setItem(config.data[0].storage_key+'_cat_flag' , 1)
                      }
                      
                     // alert(localStorage.getItem(config.data[0].storage_key+'_pro_flag'));
                     // alert(localStorage.getItem(config.data[0].storage_key+'_cat_flag'));
                     // alert(localStorage.getItem(config.data[0].storage_key+'_pro_detail_flag'));
                    
                     
                     if(localStorage.getItem(config.data[0].storage_key+'_pro_flag')==1 && localStorage.getItem(config.data[0].storage_key+'_cat_flag')==1 && localStorage.getItem(config.data[0].storage_key+'_pro_detail_flag')==0)
                      {
                          //alert("In");
                          JSON.parse(localStorage['catIds']).pop();
                          
                          //alert("in cat");
                       //   var categorydata=localStorage.getItem(config.data[0].storage_key+'_categorylist');
                         var categorydata=localStorage.getItem(config.data[0].storage_key+'_'+parentstr+'_categorylist');
                        
                         var banner_image_slider=localStorage.getItem(config.data[0].storage_key+'_'+parentstr+'_bannerlist');
                          cat_list = "<ul data-role='listview' data-inset='true'>";
                          cat_list += categorydata;
                          cat_list += "</ul>";
                          $("#category_banner").html(banner_image_slider);
                          $("#category_banner").css("display", "block");
                          $("#category").html(cat_list);
                          $("#category ul").listview();
                          $("#category ul").listview("refresh");
                          localStorage.setItem(config.data[0].storage_key+'_cat_flag',0);
                          checkLoginStatus();
                          localStorage.setItem('foo', 0);
                          getFooter();
                          loading=false;
                          return false;
                          
                         
                         
                      }
                      else if(localStorage.getItem(config.data[0].storage_key+'_pro_flag')==1)
                      {
                          var productlist=localStorage.getItem(config.data[0].storage_key+'_productlist');
                          $("#category").html(productlist);
                          localStorage.setItem(config.data[0].storage_key+'_pro_detail_flag',0);
                           $("#sorting_div").css("display","block");
                           checkLoginStatus();
                           getFooter();
                           localStorage.setItem('foo', 0);
                           return false;
                      }
                      
                      
                      
                      
                       
                       //printResponse(localStorage.getItem('productslistlocal'));
                    }
                    else{
                        
                        fetchSubCategoryList(parentstr);
                    }
                    
                    //fetchcacheSubCategoryList(parentstr);
                }
                sorttype = $("#sel-sortType").val();
                sortorder = $("#sel-sortType  :selected").attr("rel");
                $("#mofluid_home_a").html(locale.message.button["home"]);
                $("#mofluid_myaccount_a").html(locale.message.button["my_account"]);
                $("#mofluid_editprofile_a").html(locale.message.button["edit_profile"]);
                $("#mofluid_myorders_a").html(locale.message.button["my_orders"]);
                $("#mofluid_signout_a").html(locale.message.button["sign_out"]);
                $("#mofluid_signin_a").html(locale.message.button["sign_in"]);
                
                $("#p3").html(locale.message.text["name_sort_type_a_z_"]);
                $("#p3").trigger("change");
                $("#p4").html(locale.message.text["name_sort_type_z_a_"]);
                $("#p6").html(locale.message.text["price_sort_type_high__low"]);
                $("#p5").html(locale.message.text["price_sort_type_low__high"]);
                $("#searchFilter").attr("placeholder",locale.message.text["search"]);
                
                
                checkLoginStatus();
                getFooter();
            }
        
        
        
        function fetchSubCategoryList(categoryId){
            $(".ui-loader").show();
            //Ajax call start
            var catids=new Array();
            var db = dbConnection();
            //  var db = window.sqlitePlugin.openDatabase(database, "1.0", "Demo", 0);
            var current_time = new Date().getTime();
            var key = 'subcategory_'+categoryId;
            db.transaction(function(tx) {
                           //tx.executeSql('DROP TABLE IF EXISTS mofluid_cache');
                           tx.executeSql('CREATE TABLE IF NOT EXISTS mofluid_cache (key text, data text, timestamp text)');
                           tx.executeSql("select * from mofluid_cache where key='"+key+"';", [], function(tx, resdata) {
                                         
         if (resdata.rows.length > 0) {//If table is empty
         
         var diff=current_time - resdata.rows.item(0).timestamp;
         if (diff > cache_time) { //If time is expire
                                                  //delete the old row of storedetails data if cache time expire
         
         tx.executeSql("DELETE FROM mofluid_cache WHERE key=?", [key],
                       function(tx, result) {
                       
                       });// end deletion
         $.ajax({
                url: ""+BASE_URL+"?callback=?"+"&store="+STORE+"&categoryid="+categoryId+"&service=subcategory",
                type: 'GET',
                contentType: 'application/json',
                dataType: 'json',
                async: false,
                error: function(jqXHR, textStatus, errorThrown) {
                console.log("Cant load homepage webservice data");
                console.log(textStatus);
                console.log(errorThrown);
                alert("Internal server Error! \n please try after some time.")
                },
                success: function(response) {
                
                
                $(".ui-loader").hide();
                
                        results = response;
                        if (results['categories'] == null || results['categories'].length <= 0) {
                        categoryfound = 0;
                        localStorage.setItem(config.data[0].storage_key+'_pro_flag', 1);
                        localStorage.setItem(config.data[0].storage_key+"_pro_detail_flag",0);
                        printProducts(page);
                        }
                        else {
                        localStorage.setItem(config.data[0].storage_key+'_cat_flag',1);

                            db.transaction(function(tx) {
                               tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                             console.log("ERROR in insert product: " + e);
                                             });
                               
                               });
              
                        //Load Category Banner Image
                        var banner_image_slider = '<div class="category_image" style="background-image:url(' +  results["images"] +');"><div class="category_overlay"><div class="category_title_outer"><div class="category_title">'+results["title"]+'</div></div></div></div>';
                        $("#category_banner").html(banner_image_slider);
                        $("#category_banner").css("display", "block");
                        
                        /*Case When Subcategory Exists therefore display subcategory accordingly*/
                        if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                        var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+results["images"]+'" onerror="bad_image(this);"><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                        }
                        else {
                        var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                        }
                        while (i < results["categories"].length) {
                        categoryfound = 1;
                        catName = results["categories"][i]["name"];
                        catId = results["categories"][i]["id"];
                        var imageURL= results["categories"][i]["image"];
                        var proimg= results["images"];
                        var dirPath = dirname(location.href);
                   //     var fullPath = "'"+dirPath + "/subcategory.html?parent=" + catId+"'";
                        var fullPath = "subcategory.html?parent="+catId;
                        if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                        append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+imageURL+'" onerror="bad_image(this);"><h2>'+catName+'</h2></a></li>';
                        }
                        else {
                        append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+catName+'</h2></a></li>';
                        }
                        i++;
                        }
                
                try{
                var catarr = JSON.parse(localStorage['catIds']);
                if(catarr.length){
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                else{
                var catarr = [];
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                }
                catch(ex){
                var catarr = [];
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                
                
                
                        localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_categorylist',append);
                        localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_bannerlist',banner_image_slider);
                        updateList(append);
                        localStorage.setItem('foo', 0);
                        }
                        }
                        });//Ajax call end
                 
                 
                 
                 }
                 else//If time is not expire
                 {
        
            $(".ui-loader").hide();
                 var response = JSON.parse(resdata.rows.item(0).data);
                 results = response;
                 if (results['categories'] == null || results['categories'].length <= 0) {
                 categoryfound = 0;
                localStorage.setItem(config.data[0].storage_key+'_pro_flag', 1);
                localStorage.setItem(config.data[0].storage_key+"_pro_detail_flag",0);
                 printProducts(page);
                 }
                 else {
                    localStorage.setItem(config.data[0].storage_key+'_cat_flag',1);

                 //Load Category Banner Image
                 var banner_image_slider = '<div class="category_image" style="background-image:url(' +  results["images"] +');"><div class="category_overlay"><div class="category_title_outer"><div class="category_title">'+results["title"]+'</div></div></div></div>';
                 $("#category_banner").html(banner_image_slider);
                 $("#category_banner").css("display", "block");
                 
                 /*Case When Subcategory Exists therefore display subcategory accordingly*/
                 if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                 var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+results["images"]+'" onerror="bad_image(this);"><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                 }
                 else {
                 var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                 }
                 while (i < results["categories"].length) {
                 categoryfound = 1;
                 catName = results["categories"][i]["name"];
                 catId = results["categories"][i]["id"];
                 var imageURL= results["categories"][i]["image"];
                 var proimg= results["images"];
                 var dirPath = dirname(location.href);
                // var fullPath = "'"+dirPath + "/subcategory.html?parent=" + catId+"'";
                 var fullPath ="subcategory.html?parent="+catId;
                 if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                 append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+imageURL+'" onerror="bad_image(this);"><h2>'+catName+'</h2></a></li>';
                 }
                 else {
                 append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+catName+'</h2></a></li>';
                 }
                 i++;
                 }
                                         
                                         try{
                                         var catarr = JSON.parse(localStorage['catIds']);
                                         if(catarr.length){
                                         catarr.push(categoryId);
                                         localStorage['catIds'] = JSON.stringify(catarr);
                                         }
                                         else{
                                         var catarr = [];
                                         catarr.push(categoryId);
                                         localStorage['catIds'] = JSON.stringify(catarr);
                                         }
                                         }
                                         catch(ex){
                                         var catarr = [];
                                         catarr.push(categoryId);
                                         localStorage['catIds'] = JSON.stringify(catarr);
                                         }
                                         
                localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_categorylist',append);
                localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_bannerlist',banner_image_slider);
                 updateList(append);
                localStorage.setItem('foo', 0);
                 }
                 
         }
         
         
         }//End if table is not empty
         else
         {
        
         $.ajax({
                url: ""+BASE_URL+"?callback=?"+"&store="+STORE+"&categoryid="+categoryId+"&service=subcategory",
                type: 'GET',
                contentType: 'application/json',
                dataType: 'json',
                async: false,
                error: function(jqXHR, textStatus, errorThrown) {
                console.log("Cant load homepage webservice data");
                console.log(textStatus);
                console.log(errorThrown);
                alert("Internal server Error! \n please try after some time.")
                },
                success: function(response) {
                
                
                $(".ui-loader").hide();
                
                results = response;
                if (results['categories'] == null || results['categories'].length <= 0) {
                categoryfound = 0;
                localStorage.setItem(config.data[0].storage_key+'_pro_flag', 1);
                localStorage.setItem(config.data[0].storage_key+"_pro_detail_flag",0);
                printProducts(page);
                }
                else {
                localStorage.setItem(config.data[0].storage_key+'_cat_flag',1);
                db.transaction(function(tx) {
                               tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                             console.log("ERROR in insert product: " + e);
                                             });
                               
                               });
                
                
                //Load Category Banner Image
                var banner_image_slider = '<div class="category_image" style="background-image:url(' +  results["images"] +');"><div class="category_overlay"><div class="category_title_outer"><div class="category_title">'+results["title"]+'</div></div></div></div>';
                $("#category_banner").html(banner_image_slider);
                $("#category_banner").css("display", "block");
                
                /*Case When Subcategory Exists therefore display subcategory accordingly*/
                if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+results["images"]+'" onerror="bad_image(this);"><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                }
                else {
                var append = '<li onclick="getallProducts();"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+locale.message.text["all_products"]+'</h2></a></li>',catName = '',i = 0;
                }
                while (i < results["categories"].length) {
                categoryfound = 1;
                catName = results["categories"][i]["name"];
                catId = results["categories"][i]["id"];
                var imageURL= results["categories"][i]["image"];
                var proimg= results["images"];
                var dirPath = dirname(location.href);
                //var fullPath = "'"+dirPath + "/subcategory.html?parent=" + catId+"'";
                 var fullPath ="subcategory.html?parent="+catId;
                if(config.data[0].display_category_image == "1" || config.data[0].display_category_image == "1") {
                append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><img src="'+imageURL+'" onerror="bad_image(this);"><h2>'+catName+'</h2></a></li>';
                }
                else {
                append += '<li onclick="getSubCategory(this);"><a class="ui-link-inherit no-svg" rel='+fullPath+'><h2>'+catName+'</h2></a></li>';
                }
                i++;
                }
                
                try{
                var catarr = JSON.parse(localStorage['catIds']);
                if(catarr.length){
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                else{
                var catarr = [];
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                }
                catch(ex){
                var catarr = [];
                catarr.push(categoryId);
                localStorage['catIds'] = JSON.stringify(catarr);
                }
                
                
                localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_categorylist',append);
                localStorage.setItem(config.data[0].storage_key+'_'+categoryId+'_bannerlist',banner_image_slider);
                updateList(append);
                localStorage.setItem('foo', 0);
                }
                }
                });//Ajax call end
         }
         });
});

            
        
        }

    /*
         *Function to implement pagination
         *@param
         *return
         */
        
        $(document).scroll(function(){
            var _cur_top = $(window).scrollTop();
          

            if(_top < _cur_top){
                _direction = 'down';
                if ($(window).scrollTop() >= $(document).height() - $(window).height() - 100) {
                           
                           //End of page, load next content here
                    if (loading){
                           
                        loadNextPage();
                    }
                }
            }
            else{
                _direction = 'up';
            }
            console.log(_direction);
            _top = _cur_top;
        });
                           
        //Load content for next page
        function loadNextPage() {
           if(categoryfound == 0 ) {
               printProducts(++page);
           }
        }
        
        
        function printResponse(responsedata)
        {
             localStorage.setItem('foo',0);
              localStorage.setItem(config.data[0].storage_key+'_cat_flag',1);
            var response = JSON.parse(responsedata);
            results = response.data;
            if(!total_available_listed_product) {
                total_available_listed_product =  response.total;
            }
            var productList = '';
            
            if(response.total <= 0){
                productList = "<div style='padding-top:20px;'><h2>"+ locale.message.text["no_product_found_text"] +"</h2></div>";
                loading = false;
                $(".ui-loader").hide();
                $("#category").html(productList);
                $("#category").trigger("create");
                return;
            }
            else{
                $(".ui-loader").hide();
                loading = true;
                if (results.length <= 0 || results == null) {
                    productList = "<div style='padding-top:20px;'><h2>"+ locale.message.text["no_product_found_text"] +"</h2></div>";
                }
                else {
                    var i = 0;
                    
                    while (i < results.length && total_listed_product<response.total ) {
                        total_listed_product++;
                        //Cache the Results on Local Storage
                        var productName = results[i]["name"];
                        var pid = results[i]["id"];
                        var price = results[i]["price"];
                        price=CurrencyFormatted(price);
                        price=addThousandsSeparator(price);
                        var imageURL = results[i]["imageurl"];
                        var SKU = results[i]["sku"];
                        var sprice = results[i]["spclprice"];
                        sprice=CurrencyFormatted(sprice);
                        sprice=addThousandsSeparator(sprice);
                        if(sprice == price) {
                            sprice = 0;
                            results[i]["spclprice"] = 0;
                        }
                        var product_type=results[i]["type"];
                        var hasoptions = results[i]["hasoptions"];
                        console.log("Has Options : "+hasoptions);
                        var is_stock = '';
                        if (parseInt(results[i]["is_in_stock"]) > 0 && results[i]["stock_quantity"] > 0) {
                            is_stock = locale.message.text["in_stock"];
                            stock_status = "1";
                        }
                        else {
                            is_stock = locale.message.text["out_of_stock"];
                            stock_status = "0";
                        }
                        
                        var dirPath = dirname(location.href);
                       // var fullPath ="product_details.html?id=" + pid +"&stock_status" + stock_status;
                       console.log("stock_status:"+stock_status);
                       var fullPath = "'product_details.html?id=" + pid + "&stock_status" + stock_status + "'";
                        if(product_type == "simple" && hasoptions == 0){
                            if (stock_status == "1") {
                                if(results[i]["spclprice"]>0) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+results[i]["spclprice"]+'</div></div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details" ><input type="button" data-theme="c" class="secondary_btn_background"   value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" /></div></div></div></div>';
                                }
                                else {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details" ><input type="button" data-theme="c" class="secondary_btn_background"   value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" /></div></div></div></div>';
                                }
                            }
                            else {
                                if(results[i]["spclprice"]>0) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+results[i]["spclprice"]+'</div></div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                                else {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                            }
                        }
                        else if(product_type == "grouped" && hasoptions == 0){
                            
                            if (stock_status == "1") {
                                if(sprice > 0 && sprice < price) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="parent.location=' + fullPath + '"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="starting_text">'+locale.message.text["starting_at"]+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+sprice+'</div></div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="parent.location=' + fullPath + '" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                                else {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="parent.location=' + fullPath + '"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="starting_text">'+locale.message.text["starting_at"]+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="parent.location=' + fullPath + '" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                            }
                            else {
                                if(results[i]["spclprice"]>0) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="starting_text">'+locale.message.text["starting_at"]+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+results[i]["spclprice"]+'</div></div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                                else {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="starting_text">'+locale.message.text["starting_at"]+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%"><div class="detail_div secondary_btn_foreground" id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div><div class="cart_div primary_btn_foreground" id="cart" ><input type="button" data-theme="b" class="primary_btn_background" value="'+locale.message.button["add_to_cart"]+'" onclick="addDirectToCart('+pid+','+stock_status+')" />                                    </div></div></div></div>';
                                }
                            }
                        }
                        else if(product_type == "configurable" || hasoptions == 1) {
                            if (stock_status == "1") {
                                if(results[i]["spclprice"]>0) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+results[i]["spclprice"]+'</div></div><div style="width:100%"><div class="detail_div configurable_product secondary_btn_foreground" id="details"><input type="button" class="secondary_btn_background" data-theme="c" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div></div></div></div>';
                                }
                                else {
                                   
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%">                                <div class="detail_div configurable_product secondary_btn_foreground" id="details"><input type="button" class="secondary_btn_background" data-theme="c" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div></div></div></div>';
                                }
                            }
                            else {
                                if(results[i]["spclprice"]>0) {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color"><div style="text-decoration: line-through;" class="spl-price product_special_cut_price_color">'+app_curr_symbol+price+'</div><div style="font-weight:bold;float:right"> '+app_curr_symbol+results[i]["spclprice"]+'</div></div><div style="width:100%"><div class="detail_div configurable_product secondary_btn_foreground"  id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div></div></div></div>';
                                }
                                else {
                                    productList += '<div class="product_outer_div"><div class="product_inner_div"><div class="product_img_container"  onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')"><div class="pro_img_outer"><div class="pro_img_inner"><img src="'+imageURL+'" class="product_main_img" onerror="bad_image(this);"/></div></div></div><div class="product_name_div">'+productName+'</div><div class="product_name_div product_price_color">'+app_curr_symbol+price+'</div><div style="width:100%"><div class="detail_div configurable_product secondary_btn_foreground"  id="details"><input type="button" data-theme="c" class="secondary_btn_background" value='+ locale.message.button["details"] +' onclick="getProDetail('+pid+','+stock_status+',\''+product_type+'\')" /></div></div></div></div>';
                                }
                            }
                        }
                        i++;
                    }
                    $("#sorting_div").css("display","block");
                }
            }
            $("#loader_div").hide();
            
            localStorage.setItem(config.data[0].storage_key+'_productlist',productList);
            
                        if(page<=1 && productList !="") {
                $("#category").html(productList);
            }
            else {
                $("#category").append(productList);
            }
            $("#category").trigger("create");
        }
        
        
        /*
         *Function Fetch the products according to categorries
         *@param result
         *@return
         */
        
        
       function printProducts(page) {
            
            
            $("#Showpro").hide();
            var append = parent_list = '';
            var stock_status = "0";
            $("#banner_slider").hide();
            //Case When No Subcategory Exists therefore display the products under its
            var CategoryId = getParameterByName('parent');
            var all_pro = getParameterByName('All');
            if (CategoryId == "")
            CategoryId = 0;
            var BASE_URL = config.data[0].baseurl;
            var STORE = config.data[0].storeid;
            
            if(total_available_listed_product == null || total_listed_product< total_available_listed_product) {
                $(".ui-loader").show();
               
                var db = dbConnection();
                //  var db = window.sqlitePlugin.openDatabase(database, "1.0", "Demo", 0);
                var current_time = new Date().getTime();
                var key = 'subcategory_'+CategoryId+'_'+page+'_'+sorttype+'_'+sortorder;
                if(all_pro==1) //if all product is equal to 1
                {
                    key = 'subcategory_'+CategoryId+'_'+page+'_'+sorttype+'_'+sortorder+'_'+all_pro;
                   // getallProductsByParentCategory(page);
                }
                
               db.transaction(function(tx) {
                               //tx.executeSql('DROP TABLE IF EXISTS mofluid_cache');
                               tx.executeSql('CREATE TABLE IF NOT EXISTS mofluid_cache (key text, data text, timestamp text)');
                               tx.executeSql("select * from mofluid_cache where key='"+key+"';", [], function(tx, resdata) {
                                            
                                             if (resdata.rows.length > 0) {//If table is not empty
                                            
                                                     var diff=current_time - resdata.rows.item(0).timestamp;
                                                     if (diff > cache_time) { //Time expire
                                             
                                             tx.executeSql("DELETE FROM mofluid_cache WHERE key=?", [key],
                                                                   function(tx, result) {
                                                                   
                                                                   });// end deletion
                                                     $.ajax({
                                                            url: "" + BASE_URL + "?callback=?" + "&store=" + STORE + "&categoryid=" + CategoryId + "&service=products&currentpage="+page+"&pagesize="+pagesize_new+"&sorttype="+sorttype+"&sortorder="+sortorder+"&currency="+app_curr_code,
                                                            type: 'GET',
                                                            contentType: 'application/json',
                                                            dataType: 'json',
                                                            async: false,
                                                            error: function(jqXHR, textStatus, errorThrown) {
                                                            console.log("Cant load homepage webservice data");
                                                            console.log(textStatus);
                                                            console.log(errorThrown);
                                                            alert("Internal server Error! \n please try after some time.")
                                                            },
                                                            success: function(response) {
                                                            
                                                            //Data inserted in table
                                                            db.transaction(function(tx) {
                                                                           tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                                                                         console.log("ERROR in insert product: " + e);
                                                                                         });
                                                                           
                                                                           });
                                                            //End Data inserted in table
                                                           
                                                         
                                                          
                                                            
                                                            if(response.total > 0)
                                                            {
                                                            localStorage.setItem('productslistlocal', JSON.stringify(response));
                                                            printResponse(JSON.stringify(response));
                                                            }
                                                            else
                                                            {
                                                                $("#category").html("<div style='padding-top:80px; padding-left:20px;'>"+locale.message.text["no_search_result_found"]+"</div>");
                                                                $("#sorting_div").hide();
                                                                loading = false;
                                                                $(".ui-loader").hide();
                                                            }
                                                            
                                                            }
                                                            });//Ajax call end
                                                     
                                                        
                                                     
                                                     }
                                                     else
                                                     {
                                                         var response = JSON.parse(resdata.rows.item(0).data);
                                                         localStorage.setItem('productslistlocal', resdata.rows.item(0).data);
                                                         printResponse(resdata.rows.item(0).data);
                                                     }
                                             }
                                             else
                                             {
                                                    $.ajax({
                                                            url: "" + BASE_URL + "?callback=?" + "&store=" + STORE + "&categoryid=" + CategoryId + "&service=products&currentpage="+page+"&pagesize="+pagesize_new+"&sorttype="+sorttype+"&sortorder="+sortorder+"&currency="+app_curr_code,
                                                            type: 'GET',
                                                            contentType: 'application/json',
                                                            dataType: 'json',
                                                            async: false,
                                                            error: function(jqXHR, textStatus, errorThrown) {
                                                            console.log("Cant load homepage webservice data");
                                                            console.log(textStatus);
                                                            console.log(errorThrown);
                                                            alert("Internal server Error! \n please try after some time.")
                                                            },
                                                            success: function(response) {
                                                            
                                                            //Data inserted in table
                                                            db.transaction(function(tx) {
                                                                           tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                                                                         console.log("ERROR in insert product: " + e);
                                                                                         });
                                                                           
                                                                           });
                                                            //End Data inserted in table
                                                             
                                                            if(response.total > 0)
                                                            {
                                                            localStorage.setItem('productslistlocal', JSON.stringify(response));
                                                            printResponse(JSON.stringify(response));
                                                            }
                                                           else
                                                           {
                                                           $("#category").html("<div style='padding-top:80px; padding-left:20px;'>"+locale.message.text["no_search_result_found"]+"</div>");
                                                           $("#sorting_div").hide();
                                                           loading = false;
                                                           $(".ui-loader").hide();
                                                           }
                                                        }
                                                            });//Ajax call end
                                             }
                                             });
                                        });
                    
                                }
                    }
        function sortType(){
            
            sorttype = $("#sel-sortType").val();
            sortorder = $("#sel-sortType  :selected").attr("rel");
            total_available_listed_product = null;
            total_listed_product = 0;
            $("#category").html("");
            page=1;
            if(categoryfound == 0) {
                
            
            if(localStorage.getItem('foo') == 1){
                categoryfound = 0;
                var productlist=localStorage.getItem(config.data[0].storage_key+'_productlist');
                $("#category").html(productlist);
                localStorage.setItem('foo' , 0);
                //printResponse(localStorage.getItem('productslistlocal'));
            }
            else{
               printProducts(page);
            }
            
            
            
            
            
            
            }
        }
        
        function getallProductsByParentCategory(page)
        {
            //alert("1");
            $("#Showpro").hide();
            var append = parent_list = '';
            var stock_status = "0";
            $("#banner_slider").hide();
            //Case When No Subcategory Exists therefore display the products under its
            var CategoryId = getParameterByName('parent');
            if (CategoryId == "")
            CategoryId = 0;
            var BASE_URL = config.data[0].baseurl;
            var STORE = config.data[0].storeid;
            if(total_available_listed_product == null || total_listed_product< total_available_listed_product) {
                $(".ui-loader").show();
                var db = dbConnection();
                //  var db = window.sqlitePlugin.openDatabase(database, "1.0", "Demo", 0);
                var current_time = new Date().getTime();
                var key = 'allProduct_'+CategoryId;
               
                db.transaction(function(tx) {
                               //tx.executeSql('DROP TABLE IF EXISTS mofluid_cache');
                               tx.executeSql('CREATE TABLE IF NOT EXISTS mofluid_cache (key text, data text, timestamp text)');
                               tx.executeSql("select * from mofluid_cache where key='"+key+"';", [], function(tx, resdata) {
                                             
                                             if (resdata.rows.length > 0) { //If table not empty for all products
                                             
                                             
                                             var diff=current_time - resdata.rows.item(0).timestamp;
                                                     if (diff > cache_time) { //If time is expire
                                             
                                                        tx.executeSql("DELETE FROM mofluid_cache WHERE key=?", [key],
                                                                      function(tx, result) {
                                                           
                                                           });// end deletion
                                             $.ajax({
                                                    url: "" + BASE_URL + "?callback=?" + "&store=" + STORE + "&categoryid=" + CategoryId + "&service=products&currentpage="+page+"&pagesize="+pagesize_new+"&sorttype="+sorttype+"&sortorder="+sortorder+"&currency="+app_curr_code,
                                                    type: 'GET',
                                                    contentType: 'application/json',
                                                    dataType: 'json',
                                                    async: false,
                                                    error: function(jqXHR, textStatus, errorThrown) {
                                                    console.log("Cant load homepage webservice data");
                                                    console.log(textStatus);
                                                    console.log(errorThrown);
                                                    alert("Internal server Error! \n please try after some time.")
                                                    },
                                                    success: function(response) {
                                                    
                                                    
                                                    //Insert code in table
                                                    
                                                    //Data inserted in table
                                                    db.transaction(function(tx) {
                                                                   tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                                                                 console.log("ERROR in insert product: " + e);
                                                                                 });
                                                                   
                                                                   });
                                                    
                                                    
                                                    //End Of Insert code in table
                                                    
                                                    if(response.total > 0)
                                                    {
                                                     localStorage.setItem('productslistlocal', JSON.stringify(response));
                                                        printResponse(JSON.stringify(response));
                                                    }
                                                    
                                                    }
                                                    });//End ajax call
                                             
                                             
                                             
                                                     }//End of if time is expire
                                                     
                                                     else//if time is not expire
                                                     {
                                             
                                             var response = JSON.parse(resdata.rows.item(0).data);
                                             localStorage.setItem('productslistlocal', resdata.rows.item(0).data);
                                             printResponse(resdata.rows.item(0).data);
                                             
                                                     } //end if time is not expire
                                             
                                             
                                             }
                                             else ////If table is empty for all products
                                             {
                                             
                                             $.ajax({
                                                    url: "" + BASE_URL + "?callback=?" + "&store=" + STORE + "&categoryid=" + CategoryId + "&service=products&currentpage="+page+"&pagesize="+pagesize_new+"&sorttype="+sorttype+"&sortorder="+sortorder+"&currency="+app_curr_code,
                                                    type: 'GET',
                                                    contentType: 'application/json',
                                                    dataType: 'json',
                                                    async: false,
                                                    error: function(jqXHR, textStatus, errorThrown) {
                                                    console.log("Cant load homepage webservice data");
                                                    console.log(textStatus);
                                                    console.log(errorThrown);
                                                    alert("Internal server Error! \n please try after some time.")
                                                    },
                                                    success: function(response) {
                                                    
                                                    
                                                    //Insert code in table
                                                    
                                                    //Data inserted in table
                                                    db.transaction(function(tx) {
                                                                   tx.executeSql("INSERT INTO mofluid_cache (key,data,timestamp) VALUES (?,?,?)", ["" + key + "", "" + JSON.stringify(response) + "", "" + current_time + ""], function(tx, res) {}, function(e) {
                                                                                 console.log("ERROR in insert product: " + e);
                                                                                 });
                                                                   
                                                                   });

                                                    
                                                    //End Of Insert code in table
                                                    if(response.total > 0)
                                                    {
                                                     localStorage.setItem('productslistlocal', JSON.stringify(response));
                                                    printResponse(JSON.stringify(response));
                                                    }
                                                }
                                            });//End ajax call
                                             
                                             }//End of if table is empty
                                    });
                               });
                               
                
            }
        }
        
        function getallProducts(){
            var url = "subcategory.html?parent="+parentstr+"&All=1";
           Page.redirect(url, 'slide', 'left')
           //redirectTopage(url);
        }
        
       
        </script>
    </head>
    <body onLoad="onDeviceReady()">
        <div data-role="page" id="mainpage">
		   
		   
		   
<!-- new code vipin start-->
            <div class="header-language-background fixed">
                 <div class="header-language-container">
	  
	         <div class="logoheader" style="display:none;">
            	<div class="freeshipping">
				  
						<p><a href="javascript:void(0)">Free shipping to Singapore on Orders of $150 or More</a></p>			   
			   </div>
            
				 <form id="srcfrm" name="serachForms" action="javascript:custom_search();">
					<div class="input-box">
						
						
						 <input id="searchFilter" type="serach" data-type="search" placeholder="Search entire store here..." data-theme="a" />
						
					
					     <ul id="suggestions" data-role="listview" data-inset="true" data-theme="a">
                                
                            </ul>
					</div>


				</form>
				
				
				
         </div>
        <!--<div class="store-language-container">
                    </div>-->

        
       <!-- <p class="welcome-msg">Default welcome msg! </p>-->
		
		     		 
		   <div class="skip-links">
		   
		   		  <div class="myact">
				       <a href="javascript:void(0)" id="loginbtn" class="skip-link skip-account">
					
					      <span class="label">Login</span>
				      </a>
			
			          </div>
					
							<div id="header-account" style="display:none;" class="skip-content loginuser skip-active"><div class="caret"></div><div class="youama-login-window" style="display: block;">
								<div class="youama-window-outside">
								  
									<div class="youama-window-inside">
										<div class="youama-window-title">
											<h3>
												Sign In                    </h3>
										</div>
										
										<div class="youama-window-box first">
											<div class="youama-window-content">
												<div class="input-fly youama-showhideme">
													<label for="youama-email">Email <!--<span>*</span>--></label>
													<input type="text" id="username" name="username" value="">
													<div class="youama-ajaxlogin-error err-email err-noemail err-wrongemail err-wronglogin" style="display: none;"></div>
												</div>
												<div class="input-fly youama-showhideme">
													<label for="youama-password">Password <!--<span>*</span>--></label>
													<input type="password" id="password" name="password" value="">
													<div class="youama-ajaxlogin-error err-password err-dirtypassword err-nopassword err-longpassword" style="display: none;"></div>
												</div>
											</div>
										</div>
										
										<div class="youama-window-box last">
											<div class="youama-window-content box-contents box-contents-button youama-showhideme">
												<span class="youama-forgot-password">
													<a href="#">Forgot Password</a>
												</span>
												<button type="button" onclick="submitform()" class="button btn-proceed-checkout btn-checkout youama-ajaxlogin-button">
													<span>
														<span>Login</span>
													</span>
												</button>
											  
											</div>
										</div>
										
									</div>
								</div>
    </div><div class="youama-register-window" style="display: block;">
        <div class="youama-window-outside">
            <span class="close">×</span>

            <div class="youama-window-inside">
                <div class="youama-window-title">
                    <h3>
                        Create an Account                    </h3>
                </div>

                <div class="youama-window-box first">
                   
                    <div class="youama-window-content">
                        <div class="input-fly youama-showhideme">
                            <label for="youama-firstname">Name <!--<span>*</span>--></label>
                            <input type="text" id="fullname" name="fullname" value="">
                            <div class="youama-ajaxlogin-error err-firstname err-nofirstname err-dirtyfirstname" style="display: none;"></div>
                        </div>
                        
                    </div>
                </div>

                <div class="youama-window-box second">
                  
                    <div class="youama-window-content">
                        <div class="input-fly youama-showhideme">
                            <label for="youama-email">Email <!--<span>*</span>--></label>
                            <input type="text" id="email" name="email" value="">
                            <div class="youama-ajaxlogin-error err-email err-noemail err-wrongemail err-emailisexist" style="display: none;"></div>
                        </div>
                        <div class="input-fly youama-showhideme">
                            <label for="youama-password">Password <!--<span>*</span>--></label>
                            <input type="password" id="rpassword" name="rpassword" value="">
                            <div class="youama-ajaxlogin-error err-password err-dirtypassword err-nopassword err-shortpassword err-longpassword" style="display: none;"></div>
                        </div>
                        <div class="input-fly youama-showhideme">
                            <label for="youama-passwordsecond">Confirm Password <!--<span>*</span>--></label>
                            <input type="password" id="cpassword" name="cpassword" value="">
                            <div class="youama-ajaxlogin-error err-passwordsecond err-nopasswordsecond err-notsamepasswords" style="display: none;"></div>
                        </div>
						
						<div class="input-fly youama-showhideme">
                            <label for="youama-invitationcode">Invitation Code (optional) <!--<span>*</span>--></label>
                            <input type="text" id="youama-invitationcode" name="youama-invitationcode" value="" autocomplete="OfF" autocorrect="off" autocapitalize="off">
                           
                        </div>
                       
                    </div>
                </div>

                <div class="youama-window-box last">
                    <div class="youama-window-content box-contents youama-showhideme">
                        <button id="rgsbtn" onclick="regsubmitform()" type="button" class="button btn-proceed-checkout btn-checkout youama-ajaxlogin-button">
                            <span><span>Register</span></span>
                        </button>
                       <!-- <p id="y-to-login" class="yoauam-switch-window">
                                                    </p>-->
                    </div>
					 <div class="input-fly input-fly-checkbox youama-showhideme">
                           <span style="display:none;"> <input type="checkbox" id="youama-licence" name="youama-licence" checked="checked" value="ok"></span>
                            <label for="youama-licence">By creating an account you agree to the <a href="https://eluvy.com/term-condition" target="_blank">Terms and Coditions</a></label>
                            <div class="youama-ajaxlogin-error err-nolicence" style="display: none;"></div>
                     </div>
                </div>

            </div>
        </div>
    </div><div class="youama-ajaxlogin-loader">
    </div>
	
	</div>   
						
		  
			
			<div class="contactus">
			  <span class="label"><a onclick="getCMSB(25)" href="javascript:void(0);">Contact us</a></span>
			</div>
			<div class="get20off">
			  <span class="label"><a class="slide-link" href="javascript:void(0)">Get 20% Off</a></span>
			  
			      <div class="mask" style="display:none;"></div>
			      <div class="slide email-signup row" id="email-signup" style="display: none;">
				     <div class="caret"></div>
						<div class="shell email-drawer-content">
						
						<div style="display:none" class="loader">
						<img alt="Please wait..." src="https://eluvy.com/media/custimg/medium.gif">
						<p class="h3">Please wait . . .</p>
						</div>
						<div style="display:none" class="success">
						<p>You're all signed up!</p>
						<p>(and your inbox just got a dose of sparkle)</p>
						<p>You'll be the first to hear about promotions, specials and the latest new arrivals.</p>
						<div class="load_on_success">
						
						</div>
						</div>
						<div>
						
						  <div class="closecontainer"><a href="javascript:void(0)" class="close">×</a></div>
						  	
						<h2>Want to <em>score 20% off</em> your first purchase?</h2>
						<h3>Simply enter your email below and check your inbox for the promo code.</h3>
						  <div  id="newsletter-validate-detail" >
									   
           
                           <input type="email" class="input-text required-entry validate-email" title="Sign up for our newsletter" id="newsletteremail" name="email" spellcheck="false" placeholder="enter your email address" autocorrect="off" autocapitalize="off">
           
                          <button class="button" title="Subscribe" id="nwsbtn" type="button"><span><span>Sign Up</span></span></button>
                             <p><a title="No Thanks" type="reset" href="javascript:void(0)" class="exit-link">No Thanks</a></p>
                          </div>
					
					
						
						<p>Offer valid on full-price items and for first time customers only. See email for restrictions. By entering your email address, you will receive emails from Eluvy. You can unsubscribe at any time.</p>
						<div style="display:none" class="error">
						<p>We're sorry, there's been a problem with your request. Please try again.</p>
						</div>
						
						</div>
						<a class="exit-btn" href="#"><i class="fa fa-times"></i></a>
						</div>
                     </div>
			  
			</div>
			 <div class="header-minicart">
                

				<a href="javascript:void(0)" class="skip-link skip-cart  no-count">
				   
					<span class="label">Shopping Bag</span>
					  <span class="icon"></span>
					<span id="totalcount" class="count">0</span>
				</a>
			  
			<div id="header-cart" class="block block-cart skip-content" style="display:none;">
			      <div class="caret"></div>
				
			      <div id="minicart-error-message" class="minicart-message"></div>
			      <div id="minicart-success-message" class="minicart-message"></div>

				      <div id="minicart">
						  <div class="minicart-wrapper" >

							<p class="block-subtitle">
								Recently added item(s)     
								<a class="close skip-link-close" href="#" title="Close">×</a>
							</p>

						    <p class="empty">You have no items in your shopping cart.</p>

					       </div>
				
			
			         </div>
			
			
			</div>


            </div>
			</div>

    </div>
	
	
	<script>
	
	 jQuery('.slide-link').click(function(){
	   
	     jQuery('#header-cart').hide();	
		  jQuery('#header-account').hide();	
		  
		 
		 if(jQuery('.slide').css('display') == 'none')
			{
						
                jQuery('.slide').slideDown(1000);
			     jQuery('.mask').show();
				 
			}else
			{
			     jQuery('.slide').slideUp(1000);	
				 jQuery('.mask').hide();
			}
		 
	 });
	 
	  jQuery('.exit-link, .close').click(function(){
		  
		     
		          jQuery('.slide').hide();	
				 jQuery('.mask').hide();
		 
	 });
	 
	 jQuery('.skip-account').click(function(){
		  
		     
			 
			 jQuery('#header-cart').hide();	
			  jQuery('.slide').hide();	
		  	
                if(jQuery('#header-account').css('display') == 'none')
					{
					
					    jQuery('#header-account').slideDown(1000);	

					}else{
					
					     jQuery('#header-account').slideUp(1000);	
					}			
		 
	 });
	 
	  jQuery('.close').click(function(){
		  
		    jQuery('#header-account').slideUp(1000);				 
		 
	 });
	 
	 	 jQuery('.skip-cart').click(function(){
		 
		  jQuery('#header-account').hide();	
		   jQuery('.slide').hide();	
		 
		    if(jQuery('#header-cart').css('display') == 'none')
					{
					
					  jQuery('#header-cart').slideDown(1000);	

					}else{
					
					     jQuery('#header-cart').slideUp(1000);	
					}
		  
		     			 
		 
	       });
	 
	
	
	
	</script>
	
	<script>
	
	jQuery('#nwsbtn').click(function(){
		
		jQuery('.success').hide();
		 if(jQuery('#newsletteremail').val()=='')
		 {
			 
			   jQuery('.success').show();
				
				jQuery('.success').html('<div class="error">Please Enter Email Id.</div>');
				
				return false;
				
		 }else
		 {
			 
			 if(!validatesEmail(jQuery('#newsletteremail').val()))
			 {
				 
				  jQuery('.success').show();
				
				 jQuery('.success').html('<div class="error">Please Enter Valid Email Id.</div>');
				
				 return false;
			 }
		 }
		 
		 jQuery.ajax(
				{
					url : 'https://eluvy.com/newsletter/subscriber/newajax/',
					type: "POST",
					data :  {'email':jQuery('#newsletteremail').val()},
					beforeSend: function(){	jQuery('.loader').show();},
					success:function(data, textStatus, jqXHR) 
					{
						
						jQuery('.loader').hide();
						
					
						var msg='';
						
						if(data.errorMsg!='')
						{
							
							msg='<div class="error">'+data.errorMsg+'</div>';
						}
						if(data.successMsg!='')
						{
							
							msg='<div class="success">'+data.successMsg+'</div>';
						}
						
						jQuery('.success').show();
						
						jQuery('.success').html(msg);
						
						
						
					},
					error: function(jqXHR, textStatus, errorThrown) 
					{
						//if fails      
					}
				});
	
	
		
	});
	   function validatesEmail(emailAddress) {
            var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

            if (filter.test(emailAddress)) {
                return true;
            } else {
                return false;
            }
        }
		
		
		jQuery('#searchFilter').click(function(){
		
		  $("#searchFilter").focus();
		
		});
		
		
		
	</script>
	
</div>
<!--  new code vipin end-->
		
            <div data-role="header" id="mainheader" class="mainheader" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="header">
                <div class="navigation_button">
                    <a href="#" class="fa fa-angle-left fa" onclick="back_click_new();">
                    </a>
                </div>
                <div class="navigation_menu_button menu-btn">
                    <a href="#" class="fa fa-bars fa">
                        
                    </a>
                </div>
                
                <div class="navigation_logo" align="center">
                    <a href="javascript:void(0);">
                        <img  class="logo_icon" src="images/spin.gif" style="width:30px;height:30px;"/>
                    </a>
                </div>
                <!--<div class="cart_search_container">
                    <div class="navigation_cart">
                        <a href="javascript:void(0);" onclick="redirectTopage('cart.html')">
                            <img  class="cart_icon navigation_icon" src="images/themeicons/cart_32x32.png" onerror="this.onerror=null;this.src='images/cart.png'" />
                            <div class="cartamount">
                                <div class="cartNew" id="cartProducts">0</div>
                            </div>
                        </a>
                    </div>
                    <div class="navigation_search">
                        <a href="javascript:void(0);" id="search_btn"> <img src="images/search.png" class="navigation_icon"></a>
                    </div>
                </div>-->
                <div class="clear"></div>
                
                <div id="push-header" style="display:none">
                    <a href="javascript:hidePush();" style="float: right;margin: 5px 5px 5px 5px;background-color: #e5e5e5;width: 25px;height: 25px;border-radius: 100%;padding: 5px;background-image: url(images/dark/cross.png);background-position: center;background-size: 80% 80%;margin-right:5px;">&nbsp;</a>
                    <p id='push-msg' style='text-align:justify;font-weight:400;padding:0px 10px;line-height:17px;font-size:14px;width:95%'>&nbsp;</p>
                </div>
            </div>
            
            <div data-role="content">
                <div class="clear"></div>
                
                <div id="searchBox" class="searchbox" style="display:none;">
                    <form name="serachForm" action="javascript:custom_search();">
                        <div>
                            <input id="searchFilter" type="serach" data-type="search" placeholder="" data-theme="a" />
                            <ul id="suggestions" data-role="listview" data-inset="true" data-theme="a">
                                
                            </ul>
                        </div>
                    </form>
                </div>
                <div id="category_banner">
                </div>
                <div id="sorting_div" class="category-sort" style="display:none;">
                    <select name="sel-sortType" class="choose-btn" data-mini="true" id="sel-sortType" onChange="sortType();">
                        <!--option value="entity_id" rel="desc" id="p1" selected> </option>
                         <option value="entity_id" rel="asc" id="p2"></option-->
                        <option value="name" rel="asc" id="p3" selected></option>
                        <option value="name" rel="desc" id="p4"> </option>
                        <option value="price" rel="ASC" id="p5"></option>
                        <option value="price" rel="desc" id="p6"></option>
                    </select>
                </div>
                
                <div id="category" class="category" align="center">
                <!--   <div id="loader_div">
                        <center><img  class="loader" src="images/spin.gif" style="width:30px;height:30px;"/></center>
                    </div> --> 
                </div>
                
                <div class="clear"></div>
                
             <div class="footer-container">
             <div class="footer1">
	           <div class="footer-newsletter">
     	
		        <div class="block block-subscribe">
                      <div style="display:none" class="loader">
							<img alt="Please wait..." src="https://eluvy.com/media/custimg/medium.gif">
							<p class="h3">Please wait . . .</p>
					   </div>
						<div style="display:none" class="success">
							<p>You're all signed up!</p>
							<p>(and your inbox just got a dose of sparkle)</p>
							<p>You'll be the first to hear about promotions, specials and the latest new arrivals.</p>
							<div class="load_on_success">
							
							</div>
						</div>
						<form action="https://eluvy.com//newsletter/subscriber/new/" method="post" id="newsletter-validate-detail">
							<div class="block-content">
								<div class="form-subscribe-header">
									<label for="newsletter">Sign Up for Our Newsletter:</label>
								</div>
								<div class="input-box">
								   <input type="email" autocapitalize="off" autocorrect="off" placeholder="enter your email address" spellcheck="false" name="email" id="newslettere" title="Sign up for our newsletter" class="input-text required-entry validate-email">
								</div>
								<div class="actions">
									<button type="button" title="Subscribe" id="newsbtn" class="button"><span><span>Sign Up</span></span></button>
								</div>
							</div>
                        </form>
	                   <div style="display:none" class="error">
						<p>We're sorry, there's been a problem with your request. Please try again.</p>
					    </div>
						<script>
						
						jQuery('#newsbtn').click(function(){
							
							jQuery('.success').hide();
							 if(jQuery('#newslettere').val()=='')
							 {
								 
								   jQuery('.success').show();
									
									jQuery('.success').html('<div class="error">Please Enter Email Id.</div>');
									
									return false;
									
							 }else
							 {
								 
								 if(!validatesEmail(jQuery('#newslettere').val()))
								 {
									 
									  jQuery('.success').show();
									
									 jQuery('.success').html('<div class="error">Please Enter Valid Email Id.</div>');
									
									 return false;
								 }
							 }
							 
							 jQuery.ajax(
									{
										url : 'https://eluvy.com/newsletter/subscriber/newajax/',
										type: "POST",
										data :  {'email':jQuery('#newslettere').val()},
										beforeSend: function(){	jQuery('.loader').show();},
										success:function(data, textStatus, jqXHR) 
										{
											
											jQuery('.loader').hide();
											
										
											var msg='';
											
											if(data.errorMsg!='')
											{
												
												msg='<div class="error">'+data.errorMsg+'</div>';
											}
											if(data.successMsg!='')
											{
												
												msg='<div class="success">'+data.successMsg+'</div>';
											}
											
											jQuery('.success').show();
											
											jQuery('.success').html(msg);
											
											
											
										},
										error: function(jqXHR, textStatus, errorThrown) 
										{
											//if fails      
										}
									});
						
						
							
						});
						   function validatesEmail(emailAddress) {
								var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

								if (filter.test(emailAddress)) {
									return true;
								} else {
									return false;
								}
							}
							
							
                          
						</script>
  
                </div>
                 <div class="clearfix"></div>
             </div><!--footer-newsletter-->
	 
	       <div class="footer-link-block" id="footer_link_block">
					
           </div>       
                <div class="clearfix"></div>
			<div class="footer-copyright" id="footer_coptright">
			
			
			</div><!--footer-copyright-->
       </div>
     </div>
                 <!-- footer end-->
          
                
            </div>
            
            <div data-role="footer" class="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer">
            </div>
            <nav class="pushy pushy-left">
                <div id="Cate_slide">
                </div>
            </nav>
            <!-- Site Overlay -->
            <div class="site-overlay"></div>

        </div>
        <script type="text/javascript" src="js/footer.js"></script>
        <script>
          //   localStorage.setItem('foo',0);
        </script>
    </body>
</html>
